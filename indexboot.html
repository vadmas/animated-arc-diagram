<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>SAP Dashboard</title>

    <meta name="Vaden Masrani" content="D3Dashboard">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

   	<script type="text/javascript" src="js/d3.v3.min.js"></script>
   	<script type="text/javascript" src="js/underscore.min.js"></script>
   	<script type="text/javascript" src="js/tinycolor.js"></script>

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

	<!-- Slider  -->
    <script src="node_modules/bootstrap-slider/js/bootstrap-slider.js"></script>
	<link href="node_modules/bootstrap-slider/css/bootstrap-slider.css" rel="stylesheet">

    <!-- Chosen  -->
    <script src="node_modules/chosen/chosen.jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="node_modules/chosen/chosen.min.css">
 	
 	<!-- Multiselect  -->
    <script src="node_modules/bootstrap-multiselect/dist/js/bootstrap-multiselect.js"></script>
    <link rel="stylesheet" type="text/css" href="node_modules/bootstrap-multiselect/dist/css/bootstrap-multiselect.css">

    <!-- Sortable  -->
    <script src="/node_modules/react-rubaxa-sortable/node_modules/sortablejs/Sortable.min.js"></script>
   

	<link href="css/style.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="container-fluid">
	<div class="row">
		<div class="col-md-12" id="header">
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<form class="navbar-form navbar-right" role="search">
					<label style="color:white; font-weight:normal">Search</label>
	                <select class="chosen chzn-done item_search" name="FUNC_select" id="item_select">
	                <option value=""></option>
	                <option value="">1</option>
	                <option value="">2</option>
	                </select>
				</form>
			</div>
			<div class="row" id="focus">
				<div class="col-md-3" id="filterbar">
					<div class="input-small"> 
						<label class="control-label text-left input-medium">Performance</label>
						<input id="performanceSlider" type="text" class="span2" value="" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="[0.25,0.75]"/> 
					</div>
					<div class="input-small">
						<label class="control-label text-left input-medium">Usage</label>
						<input id="usageSlider" type="text" class="span2" value="" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="[0,1]"/>
					</div>
					<div class="top-buffer" id="sortDiv">
						<label class="control-label text-left input-mini" >Sort</label>
					     <select class="form-control input-medium top-buffer" style="margin-top: 15px;" id="sortSelect">
							 <option value="name">Name</option>
						     <option value="degree">Degree</option>
						     <option value="value">Value</option>
						 </select>
					</div>
					<div class="top-buffer" id="orderDiv">
				    	<label class="control-label text-left input-mini">Order</label>
					     <select class="form-control input-medium top-buffer" style="margin-top: 15px;" id="orderSelect" multiple="multiple">
							<option>PROG</option>
							<option>TCOD</option>
							<option>VIEW</option>
							<option>FUNC</option>
							<option>TABL</option>
							<option>INCL</option>
							<option>METH</option>
							<option>FUGR</option>
							<option>TTAB</option>
							<option>STRU</option>
							<option>DTEL</option>
							<option>TTYP</option>
						 </select>
					</div>
				<div class="checkbox">
				  <label class="input-medium">
				    <input type="checkbox" value="" id="links_checkbox">
				    Hide lines
				  </label>
				</div>
				</div>
				<div class="col-md-9">
					<p>
						Lorem ipsum dolor sit amet, <strong>consectetur adipiscing elit</strong>. Aliquam eget sapien sapien. Curabitur in metus urna. In hac habitasse platea dictumst. Phasellus eu sem sapien, sed vestibulum velit. Nam purus nibh, lacinia non faucibus et, pharetra in dolor. Sed iaculis posuere diam ut cursus. <em>Morbi commodo sodales nisi id sodales. Proin consectetur, nisi id commodo imperdiet, metus nunc consequat lectus, id bibendum diam velit et dui.</em> Proin massa magna, vulputate nec bibendum nec, posuere nec lacus. <small>Aliquam mi erat, aliquam vel luctus eu, pharetra quis elit. Nulla euismod ultrices massa, et feugiat ipsum consequat eu.</small>
					</p>
				</div>
			</div>
		</div>
	</div>
	<div class="row top-buffer chart">
		<div id="arc_diagram"></div>
	</div>
</div>

<script type="text/javascript" src="arc_diagram.js"></script>
<script>
   
  var mySlider = $("#performanceSlider").slider();
  var mySlider = $("#usageSlider").slider();

  $(".item_search").chosen({
        width:"300px",
        search_contains: true
      }).on("change", function(event, data){ 
          handleSelected(data.selected);
      });

  // var ob = $('#sortSelect');
  //   ob.multiselect({
  //   });

  $('#sortSelect').multiselect().change(function() {
  	console.log("selected");
    sapdash.change_order($(this).val());
});

 //Configure multiselect widget
    var ob = $('#orderSelect');
    ob.multiselect({
        // includeSelectAllOption: true,
        allSelectedText: 'Display all',
        onDropdownHide: function(event) {
            console.log(event);
        }
    });
 $("#orderDiv .multiselect-container").attr("id","my-ui-list");

  // var list = document.getElementById("my-ui-list");
  var list = document.getElementById("my-ui-list");
  Sortable.create(list); // That's all.

  d3.json("data/ps_data.json", function(json){
     sapdash.init(json,{},"#arc_diagram");
  });

  //  d3.select("#order").on("change", function() {
  //     sapdash.change_order(this.value);
  //  });

  //  d3.select("#value").on("change", function() {
  //     sapdash.set_value(this.value);
  //  });

   d3.select("#links_checkbox").on("change", function() {
      if(this.checked){
        sapdash.show_links(false);
    }
      else{
        sapdash.show_links(true);
    }
  });

   </script>

  </body>
</html>